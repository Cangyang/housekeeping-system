qing.registNS("qmod.topbar"),qmod.topbar.ListenerMgr=function(){var a=function(a){qui.showLogin({}),qing.event.stop(a)},b={click:{"q-goto-login":a}},c=function(){qext.fn.addEventMap(document.body,["click"],b)};return{run:c}}(),qmod.topbar.Main=function(){var a=function(){qext.FontDetect.detect(["\u5fae\u8f6f\u96c5\u9ed1","Microsoft Yahei","\u5fae\u8f6f\u96c5\u9ed1"],function(a){var b=qing.dom.query("html")[0];a?qing.dom.addClass(b,"mod-with-msyahei"):qing.dom.addClass(b,"mod-without-msyahei")})},b=function(){qing.dom.ready(function(){wpo.dom=new Date*1}),qing.on(window,"load",function(){var a=wpo.load=new Date*1;setTimeout(function(){var b=["pid="+wpo.pid,"head="+(wpo.head-wpo.start),"tti="+(wpo.tti-wpo.start),"dom="+(wpo.dom-wpo.start),"load="+(wpo.load-wpo.start),"page="+wpo.page,"r="+a],c="wpo_"+a,d=window[c]=new Image;d.onload=d.onerror=function(){window[c]=null},d.src="http://nsclick.baidu.com/v.gif?type=2009&fn=wpo&"+b.join("&"),d=null},0)})},c=function(){qing.dom.ready(function(){a(),qmod.topbar.ListenerMgr.run(),b()})};return{init:c}}(),qmod.topbar.Main.init(),qing.registNS("qui.functions"),qui.functions={isIE:qing.browser.ie!=undefined,isIE6:qing.browser.ie!=undefined&&qing.browser.ie<7},qui.isIE=qui.functions.isIE,qui.isIE6=qui.functions.isIE6,qing.registNS("qui"),qui.Event=qing.lang.createClass(function(a){this.observable=a,this.listeners=[]}).extend({isEvent:!0,addListener:function(a,b){var c=this,b=b||c.observable;c.isListening(a,b)||(listener={fn:a,scope:b,ev:c},c.firing&&(c.listeners=c.listeners.slice(0)),c.listeners.push(listener))},findListener:function(a,b){var c=this.listeners,d=c.length,e,f;while(d--){e=c[d];if(e){f=e.scope;if(e.fn==a&&(f==b||f==this.observable))return d}}return-1},isListening:function(a,b){return this.findListener(a,b)!==-1},removeListener:function(a,b){var c=this,d,e,f;return d=c.findListener(a,b),d!=-1?(e=c.listeners[d],c.firing&&(c.listeners=c.listeners.slice(0)),qing.array.removeAt(c.listeners,d),!0):!1},clearListeners:function(){var a=this.listeners,b=a.length;while(b--)this.removeListener(a[b].fn,a[b].scope)},fire:function(){var a=this,b=a.listeners,c=b.length,d,e,f;if(c>0){a.firing=!0;for(d=0;d<c;d++){f=b[d],e=arguments.length?Array.prototype.slice.call(arguments,0):[];if(f&&f.fn.apply(f.scope||a.observable,e)===!1)return a.firing=!1}}return a.firing=!1,!0}}),qing.registNS("qui"),qui.Observable=qing.lang.createClass(function(){var a=this;a.events={}}).extend({fireEvent:function(){var a=this,b=arguments.length?Array.prototype.slice.call(arguments,0):[],c=b[0].toLowerCase(),d=!0,e=a.events[c];return e&&e!==!0&&(b.shift(),d=e.fire.apply(e,b)),d},addListener:function(a,b,c){var d=this,e;if(typeof a!="string")return;a=a.toLowerCase(),e=d.events[a]=d.events[a]||!0,qing.lang.isBoolean(e)&&(d.events[a]=e=new qui.Event(d,a)),e.addListener(b,c)},removeListener:function(a,b,c){var d=this,e;if(typeof a!="string")return;a=a.toLowerCase(),e=d.events[a],e&&e.isEvent&&e.removeListener(b,c)},clearListeners:function(){var a=this.events,b,c;for(c in a)a.hasOwnProperty(c)&&(b=a[c],b.isEvent&&b.clearListeners())},addEvents:function(a){var b=this,c,d;b.events=b.events||{};if(qing.lang.isString(a)){c=arguments,d=c.length;while(d--)b.events[c[d]]=b.events[c[d]]||!0}},hasListener:function(a){var b=this.events[a.toLowerCase()];return b&&b.isEvent===!0&&b.listeners.length>0}}),qing.registNS("qui"),qui.Layer=qing.lang.createClass(function(a){a=a||{},this.dom=null,this.entity=null,this._ifm=null,this.isShow=!1,this._events=[],this.tmpBodyOverflow=qing.dom.getStyle(document.body,"overflow");var b={width:0,height:0,x:0,y:0,isFixed:!1,id:"",entityID:"",contentID:"",template:a.template,templateString:"",container:a.container,nodes:{}};this.getProperty=function(){return b};var c=b.id="_"+qing.getUniqueId();b.entityID=c+"_entity",b.contentID=c+"_content",a.template&&this.setTemplate(b.template)},{superClass:qui.Observable}).extend({_init:function(){this.addEvents("beforeshow","show","beforeclose","close","beforedestroy","destroy")},_on:function(a,b,c,d){d?c=qing.fn.bind(c,d):c=qing.fn.bind(c,this),qing.on(a,b,c),this._events.push([a,b,c])},_un:function(a,b,c){qing.event.un(a,b,c),qing.array.remove(this._events,[a,b,c])},_removeAllListener:function(){var a=this._events;for(var b=a.length-1;b>=0;b--){var c=a[b];qing.event.un(c[0],c[1],c[2]),a.pop()}},destroy:function(){var a=this;a.fireEvent("beforedestroy",a),a._removeAllListener(),a.dom.parentNode&&a.dom.parentNode.removeChild(a.dom),a.entity=null,a._ifm&&(a._ifm=null),a.fireEvent("destroy",a)},close:function(){var a=this;a.fireEvent("beforeclose",a),a.hide(),a.destroy(),qui.Layer.closeTipOnblur&&T.event.un(document.body,"click",qui.Layer.closeTipOnblur);if(this.bgShow){var b=this.bgShow;T.dom.hide(b)}qui.isIE6&&(document.body.style.overflow=a.tmpBodyOverflow),a.fireEvent("close",a)},setTemplate:function(a){var b=this.getProperty(),c=/[^\{\}]+(?=\})/g;b.template=a,b.templateString=a.match(c),this.dom&&(this.dom.parentNode.removeChild(this.dom),this.dom=null),this.dom=qing.dom.create("div"),this.dom.innerHTML=baidu.format(b.template,this.getNodes("id")),document.body.appendChild(this.dom);if(!qing.g(b.entityID))throw new Error("[Error from layer.js] there missing #{entityID} or #{contentID} in layer template");qing.setStyles(this.dom,{position:"absolute",zIndex:"1024",left:b.x+"px",top:b.y+"px"}),b.nodes=this.getNodes(),this.entity=b.nodes.entity,qing.setStyles(this.entity,{position:"absolute",zIndex:"1024",left:"0px",top:"0px"}),b.width=parseInt(this.entity.style.width),this._addIframe(),b.container&&b.container.appendChild(this.dom),this.hide()},getNodes:function(a){var b=this.getProperty(),c=a||"dom",d={},e=b.templateString;if(e)for(var f=0,g=e.length;f<g;f++){var h=e[f];switch(c){case"dom":d[h]=qing.g(b.id+"_"+h);break;case"id":d[h]=b.id+"_"+h}}return d},_addIframe:function(){var a=this._ifm=qing.dom.create("iframe");qing.setStyles(a,{position:"absolute",zIndex:"1024",left:0,top:0,border:0}),this.dom.insertBefore(a,this.entity),qing.setStyle(a,"opacity",0)},hide:function(){qing.setStyles(this.dom,{left:"-10000px",top:"-10000px"}),this.isShow=!1,qing.dom.setAttr(document.body,"data-layershow",0);if(this.bgShow){var a=this.bgShow;T.dom.hide(a)}qui.isIE6&&(document.body.style.overflow=this.tmpBodyOverflow)},setSize:function(a){var b=this.getProperty();a=a||{},a.width&&(b.nodes.entity.style.width=a.width+"px",b.width=a.width),a.height&&(b.nodes.entity.style.height=a.height+"px",b.height=a.height),this._updateIfmSize()},setPosition:function(a){var b=this.getProperty();a=a||{},a.left&&(this.dom.style.left=a.left+"px",b.x=a.left),a.top&&(this.dom.style.top=a.top+"px",b.y=a.top)},getWidth:function(){var a=this.entity.style.display,b=this.entity.style.visibility,c;return this.entity.style.visibility="hidden",this.entity.style.display="",c=this.entity.offsetWidth,this.entity.style.display=a,this.entity.style.visibility=b,c},getHeight:function(){var a=this.entity.style.display,b=this.entity.style.visibility,c;return this.entity.style.visibility="hidden",this.entity.style.display="",c=this.entity.offsetHeight,this.entity.style.display=a,this.entity.style.visibility=b,c},getX:function(){return parseInt(this.dom.style.left)},getY:function(){return parseInt(this.dom.style.top)},_updateIfmSize:function(){this._ifm&&qing.setStyles(this._ifm,{width:this.entity.offsetWidth+"px",height:this.entity.offsetHeight+"px"})},show:function(a){var b=this,c=b.getProperty();b.fireEvent("beforeshow",b),qing.setStyles(b.dom,{left:c.x+"px",top:c.y+"px"}),b._ifm&&b._updateIfmSize(),b.isShow=!0,qing.dom.setAttr(document.body,"data-layershow",1),b.fireEvent("show",b);var d=!1;if(a){a.isAutoHide?d=!0:d=!1;if(a.isShowBg){var e=T.dom.create("div",{style:"position:absolute;z-index:1020;top:0;left:0;width:100%;height:"+document.body.offsetHeight+"px"});document.body.appendChild(e),b.bgShow=e}}a&&!a.isAutoHide&&!a.isShowBg&&(d=!0),b.isScrollHideWhenShow&&!qui.isIE6,!d&&!b.isPanelAutoClose&&(qui.Layer.closeTipOnblur=function(a){var c=a.target||a.srcElement;if(c&&c!=b.dom&&T.dom.contains(b.dom,c))return;b.close()},setTimeout(function(){T.event.on(document.body,"click",qui.Layer.closeTipOnblur)},0))},setContentEl:function(a){if(a){var b=this.getProperty();qing.dom.empty(b.nodes.content),b.nodes.content.appendChild(qing.g(a))}},setContent:function(a){if(a&&qing.lang.isString(a)){var b=this.getProperty();b.nodes.content.innerHTML=a}},setZIndex:function(a){this.dom.style.zIndex=a},center:function(a){a=a||{};var b=this;viewWidth=qing.page.getViewWidth(),viewHeight=qing.page.getViewHeight(),layerWidth=b.entity.offsetWidth,layerHeight=b.entity.offsetHeight,x=viewWidth>layerWidth?.5*(viewWidth-layerWidth):0,y=viewHeight>layerHeight?.5*(viewHeight-layerHeight):0,opt={},opt.left=a.left||x+(window.pageXOffset?window.pageXOffset:window.document.documentElement.scrollLeft),opt.top=a.top||y+(window.pageYOffset?window.pageYOffset:window.document.documentElement.scrollTop),b.setPosition(opt)}}),qing.registNS("qui"),qui.Mask=qing.lang.createClass(function(a){a=qing.extend({opacity:.4},a);var b=this.getProperty(),c='<div id="#{entity}" style="position:absolute;left:0px;top:0px;zIndex:1024;background:#000;width:'+qing.page.getWidth()+"px;height:"+qing.page.getHeight()+'px"></div>';b.opacity=isNaN(a.opacity)?.4:a.opacity,this.isScrollHideWhenShow=a.isScrollHideWhenShow||!0,this.isPanelAutoClose=a.isScrollHideWhenShow||!0,this.setTemplate(c),this.setOpacity(b.opacity),this.entity.style.position="fixed",this._on(window,"resize",function(){if(this.entity){var a=this;setTimeout(function(){a.updateSize()},1)}},this),this.hide()},{superClass:qui.Layer}).extend({setOpacity:function(a){if(isNaN(a))return;var b=this.getProperty();b.opacity=a,qui.isIE?this.entity.style.filter="alpha(opacity="+a*100+")":this.entity.style.opacity=a},updateSize:function(){if(!this.isShow)return;this.hide();var a=qing.page.getWidth(),b=qing.page.getHeight();this.entity.style.width=a+"px",this.entity.style.height=b+"px",this.ifm&&(this.ifm.style.width=a+"px",this.ifm.style.height=b+"px"),this.show()}}),qing.registNS("qui.dialog"),qui.dialog.Dialog=qing.lang.createClass(function(a){a=qing.extend({width:400,height:300,draggable:!0,modal:!0,opacity:0,change:[0,0]},a),a.hasTitle=a.hasTitle===!1?!1:!0,a.width=parseInt(a.width),a.height=parseInt(a.height),a.width<410&&(a.change[0]=410-a.width,a.width=410),a.height<70&&(a.change[1]=70-a.height,a.height=70),this.draggable=!1,this._dragInstance=null,a.modal&&(this.mask=new qui.Mask({opacity:a.opacity}));var b="";a.hasTitle&&(b=['<div id="#{titlebar}" class="x-dialog-titlebar">','<span id="#{title}"></span>',"</div>"].join(""));var c=a.containerClass||"";c&&(c=[" ",c].join(""));var d=['<div class="x-dialog',c,'" id="#{entity}">','<div id="#{shadow}" ></div>','<div id="#{box}" class="x-dialog-box">',b,'<a id="#{closeBtn}" href="#" onclick="return false;" class="x-dialog-closebtn"></a>','<div id="#{contentBox}" class="x-dialog-content-box">','<div id="#{content}" class="x-dialog-content"></div>','<div id="#{btnPanel}" class="x-dialog-btnPanel"></div>',"</div>","</div>","</div>"].join("");this.setTemplate(d);var e=this.getProperty(),f=parseInt(a.width),g=parseInt(a.height);qing.setStyles(e.nodes.content,{width:f-a.change[0]+"px",height:g-a.change[1]+"px",paddingTop:a.change[1]/2+"px",paddingBottom:a.change[1]/2+"px",paddingLeft:a.change[0]/2+"px",paddingRight:a.change[0]/2+"px"}),a.hasTitle&&qing.lang.isString(a.title)&&this.setTitle(a.title),a.contentEl?this.setContentEl(a.contentEl):a.content&&this.setContent(a.content),a.buttons?this._addButton(a.buttons):e.nodes.btnPanel.style.display="none",a.contentBoxStyle&&qing.setStyles(e.nodes.contentBox,a.contentBoxStyle),a.contentStyle&&qing.setStyles(e.nodes.contentBox,a.contentStyle),qing.setStyles(e.nodes.contentBox,{width:e.nodes.content.offsetWidth+"px"}),qing.setStyles(e.nodes.box,{width:e.nodes.contentBox.offsetWidth+"px"});var h=5,i=e.nodes.box.offsetWidth+2*h,j=e.nodes.box.offsetHeight+2*h;qing.setStyles(e.nodes.shadow,{width:i+"px",height:j+"px"}),this.setDraggable(!!a.draggable,a.hasTitle);if(a.listeners)for(var k in a.listeners){var l=a.listeners[k];this.addListener(k,l.fn,l.scope||this)}a.showCloseBtn!==!1?this._on(e.nodes.closeBtn,"click",this.close,this):e.nodes.closeBtn.style.display="none",this._init()},{superClass:qui.Layer}).extend({_init:function(){this.addEvents("beforedrag","dragstart","drag","afterdrag"),this.addListener("show",function(){this.mask&&this.mask.show(),this.center()}),this.addListener("hide",function(){this.mask&&this.mask.hide()}),this.addListener("destroy",function(){this.mask&&this.mask.destroy()})},setDraggable:function(a,b){var c=this,d=c.getProperty();if(baidu.lang.isBoolean(a))if(a){if(c.draggable)return;b&&(c._dragInstance=qing.dom.draggable(c.dom,{handler:d.nodes.titlebar,onbeforedragstart:function(){c.fireEvent("beforedrag",c)},ondragstart:function(){c.fireEvent("dragstart",c)},ondrag:function(){c.fireEvent("drag",c)},ondragend:function(){c.fireEvent("afterdrag",c)}}),qing.dom.addClass(d.nodes.titlebar,"x-cursor-move")),c.draggable=!0}else c.draggable&&(c._dragInstance.cancel(),c._dragInstance=null,b&&qing.dom.removeClass(d.nodes.titlebar,"x-cursor-move"),c.draggable=!1)},setTitle:function(a){var b=this.getProperty();b.nodes.title.innerHTML=a},_addButton:function(a){var b=this,c=[];qing.array.each(a,function(a){var b="green"==a.type?"btn-s btn-12":"btn-g btn-12";c.push('<a href="#" onclick="return false;" class="x-dialog-btn '+b+'">'+a.text+"</a>")});var d=this.getProperty();d.nodes.btnPanel.innerHTML=c.join("");var e=d.nodes.btnPanel.getElementsByTagName("a");qing.array.each(a,function(a,c){a.handler&&qing.lang.isFunction(a.handler)&&b._on(e[c],"click",a.handler,a.scope)})}}),qing.registNS("qui.dialog"),qui.dialog.Message=qing.lang.createClass(function(a){a=qing.extend({opacity:0},a),a.modal&&(this.mask=new qui.Mask({opacity:a.opacity})),a.type=a.type||"normal";var b="icon-ok-32";switch(a.type){case"alert":b="icon-alert-32";break;case"forbidden":b="icon-forbidden-32";break;case"error":b="icon-error-32";break;case"alert-blue":b="icon-alert-blue-32";break;case"help":b="icon-help-32"}var c=['<div class="x-dialog" id="#{entity}">','<div id="#{shadow}" class="x-dialog-shadow"></div>','<div id="#{box}" class="x-dialog-box x-dialog-tip">','<div id="#{contentBox}" class="x-dialog-content-box yahei '+b+'">','<div id="#{content}" class="x-dialog-tip-content"></div>',"</div>","</div>","</div>"].join("");this.setTemplate(c),this.setContent(a.msg);var d=this.getProperty(),e=5;qing.lang.isNumber(a.width)&&qing.setStyle(d.nodes.content,"width",a.width+"px"),qing.lang.isNumber(a.height)&&qing.setStyle(d.nodes.content,"height",a.height+"px"),qing.setStyles(d.nodes.box,{width:d.nodes.contentBox.offsetWidth+"px",height:d.nodes.contentBox.offsetHeight+"px"}),qing.setStyles(d.nodes.shadow,{width:e*2+d.nodes.box.offsetWidth+"px",height:e*2+d.nodes.box.offsetHeight+"px"}),this._init()},{superClass:qui.Layer}).extend({_init:function(){this.addListener("show",function(){this.mask&&this.mask.show()}),this.addListener("hide",function(){this.mask&&this.mask.hide()}),this.addListener("destroy",function(){this.mask&&this.mask.destroy()})},setContent:function(a){if(a&&qing.lang.isString(a)){var b=this.getProperty();b.nodes.content.innerHTML=a}}}),qing.registNS("qui.dialog"),qui.dialog.DialogManager={_getAppropriateSize:function(a,b){var c=qing.dom.create("div",{className:"yahei"}),d={overflow:!1};return qing.setStyles(c,{position:"absolute",left:"-10000px",top:"-10000px"}),c.innerHTML=a,document.body.appendChild(c),c.offsetWidth>b&&(qing.dom.addClass(c,"x-word-wrap"),c.style.width="600px",d.overflow=!0),d.width=c.offsetWidth+10,d.height=c.offsetHeight,document.body.removeChild(c),c=null,d},alert:function(a,b){b=b||{};var c={overflow:!1},d=250,e=20,f=600,g={title:qing.lang.isString(b.title)?b.title:"\u63d0\u793a",opacity:.2,width:b.width||d,height:b.height||e,showCloseBtn:b.showCloseBtn,content:a,buttons:b.buttons||[{text:"\u786e\u5b9a",type:"green",handler:function(){this.close()}}]};!qing.lang.isNumber(b.width)&&!qing.lang.isNumber(b.height)&&(c=qui.dialog.DialogManager._getAppropriateSize(a,f),g.width=c.width,g.height=c.height),g.width=g.width>=d?g.width:d,g.width=g.width<=f?g.width:f,g.height=g.height>=e?g.height:e,b.fn&&qing.lang.isFunction(b.fn)&&(g.listeners={close:{fn:b.fn,scope:b.scope||window}});var h=new qui.dialog.Dialog(g);return c.overflow&&qing.dom.addClass(h.getProperty().nodes.content,"x-word-wrap"),h.show({isAutoHide:!1}),h},confirm:function(a,b){b=b||{};var c={overflow:!1},d=250,e=20,f=600,g={title:qing.lang.isString(b.title)?b.title:"\u63d0\u793a",opacity:.2,width:b.width||d,height:b.height||e,showCloseBtn:b.showCloseBtn,content:a,buttons:[{text:"\u786e\u5b9a",type:"green",handler:function(){this.close();if(b.fn&&qing.lang.isFunction(b.fn)){var a=qing.fn.bind(b.fn,b.scope||window,"yes");a()}}},{text:"\u53d6\u6d88",handler:function(){this.close();if(b.fn&&qing.lang.isFunction(b.fn)){var a=qing.fn.bind(b.fn,b.scope||window,"no");a()}}}]};!qing.lang.isNumber(b.width)&&!qing.lang.isNumber(b.height)&&(c=qui.dialog.DialogManager._getAppropriateSize(a,f),g.width=c.width,g.height=c.height),g.width=g.width>=d?g.width:d,g.width=g.width<=f?g.width:f,g.height=g.height>=e?g.height:e,b.fn&&qing.lang.isFunction(b.fn)&&(g.listeners={close:{fn:b.fn,scope:b.scope||window}});var h=new qui.dialog.Dialog(g);return c.overflow&&qing.dom.addClass(h.getProperty().nodes.content,"x-word-wrap"),h.show({isAutoHide:!1}),h},showMsg:function(a,b){b=qing.extend({msg:a,type:"normal",autoClose:!0},b),a='<div style="font-size:18px">'+a+"</div>";var c={overflow:!1},d=600;!qing.lang.isNumber(b.width)&&!qing.lang.isNumber(b.height)&&(c=qui.dialog.DialogManager._getAppropriateSize(a,d),b.width=c.width);var e=new qui.dialog.Message(b);e.show(),e.center(),e.setPosition({left:b.left,top:b.top});var f=b.time||1500;if(!b.autoClose)return e;setTimeout(function(){e.close()},f)},showIframe:function(a){var b=new qui.dialog.Dialog(a),c=qing.getUniqueId(),d='<iframe name="'+c+'" id="'+c+'" frameborder="0" scrolling="no" style="width:100%;height:100%;" src="'+a.url+'""></iframe>';b.setContent(d);var e={};return e.isAutoHide=a.isAutoHide||!0,e.isShowBg=a.isShowBg||!0,b.show(e),b.iframeId=c,b},loginDialogIsShowing:undefined,loginDialogIsCheckingStatus:!1,hideLogin:function(){var a=qui.dialog.DialogManager.loginDialogIsShowing;a&&(qing.dom.remove(a),qui.dialog.DialogManager.loginDialogIsShowing=!1)},showLoginRerender:function(a){var a=a||{},b=qui.dialog.DialogManager.loginDialogIsShowing;if(b){var c=qing.dom.q("x-dialog-show-login-iframe",b)[0];c&&qing.dom.setStyles(c,a)}},showLogin:function(a){if(qui.dialog.DialogManager.loginDialogIsCheckingStatus)return;qui.dialog.DialogManager.loginDialogIsCheckingStatus=!0;var b=qui.dialog.DialogManager.loginDialogIsShowing,a=a||{};if(b){qing.dom.remove(b),qui.dialog.DialogManager.loginDialogIsShowing=!1,qui.dialog.DialogManager.loginDialogIsCheckingStatus=!1;return}var c=[window.qDomain.qing,"/com/data/checkuser"].join(""),d=function(b){qui.dialog.DialogManager.loginDialogIsCheckingStatus=!1;var b=b[0],c=a.jumpUrl||window.location.href;if(b.loginStatus!="not_login"){window.location.href=c;return}qing.browser.ie<7&&window.scroll(0,0);var d=337;qing.browser.ie&&qing.browser.ie<7&&(d=357);var e=qing.getUniqueId(),f=a.prefixElement||qing.g("modTopbar"),g=a.width||980,h=a.height||d,i=qing.dom.create("iframe",{"class":"x-dialog-show-login-iframe",name:e,id:e,frameborder:0,scrolling:"no",src:[window.qDomain.qing,"/go/login?mode=top&width=",g,"&height=",h,"&u=",c].join("")}),j=qing.dom.create("div",{"class":"x-dialog-show-login",id:qing.getUniqueId()}),k=qing.dom.create("a",{"class":"x-dialog-closebtn"}),l=qing.dom.create("div",{"class":"x-dialog-show-login-container"});qing.dom.setStyles(j,{top:qing.g("modTopbar").offsetHeight-5,width:g}),qing.dom.setStyles(i,{height:h}),l.appendChild(k),l.appendChild(i),j.appendChild(l),qing.event.once(k,"click",function(){var a=qing.dom.getAncestorByClass(this,"x-dialog-show-login");a&&(qing.dom.remove(a),qui.dialog.DialogManager.loginDialogIsShowing=!1)});var m=qing.dom.create("div",{id:"topbarLoginDialog"});m.appendChild(j),qing.dom.insertAfter(m,f),qui.dialog.DialogManager.loginDialogIsShowing===undefined&&qing.on(window,"resize",function(a){qui.dialog.DialogManager.loginDialogIsShowing&&n(qui.dialog.DialogManager.loginDialogIsShowing,parent)}),qui.dialog.DialogManager.loginDialogIsShowing=j;var n=function(a,b){var c=(b.offsetWidth-a.offsetWidth)/2;qing.dom.setStyles(a,{left:c})};n(j,parent)};qing.ajax.get(c,{},d,function(){qui.dialog.DialogManager.loginDialogIsCheckingStatus=!1})},showDialog:function(a,b){b=b||{};var c={overflow:!1},d=250,e=20,f=1e3,g={title:qing.lang.isString(b.title)?b.title:"\u63d0\u793a",opacity:.2,width:b.width||d,height:b.height||e,showCloseBtn:b.showCloseBtn,hasTitle:b.hasTitle===!1?!1:!0,buttons:b.buttons||!1,content:a};b.containerClass&&(g.containerClass=b.containerClass),!qing.lang.isNumber(b.width)&&!qing.lang.isNumber(b.height)&&(c=qui.dialog.DialogManager._getAppropriateSize(a,f),g.width=c.width,g.height=c.height),b.boxstyle&&(g.contentBoxStyle=b.boxstyle),b.style&&(g.contentStyle=b.style),g.width=g.width>=d?g.width:d,g.width=g.width<=f?g.width:f,g.height=g.height>=e?g.height:e,b.fn&&qing.lang.isFunction(b.fn)&&(g.listeners={close:{fn:b.fn,scope:b.scope||window}});var h=new qui.dialog.Dialog(g);return c.overflow&&qing.dom.addClass(h.getProperty().nodes.content,"x-word-wrap"),h.show({isAutoHide:!1}),h},showNickname:function(){var a="dialogNickname",b=['<div class="nickname-box">','<div class="nickname-box-title">\u606d\u559c\u60a8\u6210\u529f\u521b\u5efa\u7a7a\u95f4\uff01</div>','<div class="nickname-box-form">\u7a7a\u95f4\u6635\u79f0<input id="',a,'" type="text" class="placeholder input-box" placeholder="\u6700\u591a7\u4e2a\u6c49\u5b57\u621614\u4e2a\u5b57\u7b26" /></div>','<div class="nickname-box-tip"></div>',"</div>"].join("");qui.dialog.DialogManager.showDialog(b,{showCloseBtn:!1,hasTitle:!1,containerClass:"x-dialog-nickname",buttons:[{text:"\u786e\u5b9a",type:"green",handler:function(){var b=[window.qDomain.qing,"/go/submit/nickname"].join(""),c=qing.g(a),d=qing.dom.query(".nickname-box .nickname-box-tip")[0];if(!c)return;qing.ajax.post(b,{nickname:c.value},function(a){this.close()},function(a){d&&(d.innerHTML=a.errorMsg)})}}]});var c=qing.g(a);c&&(qext.placeholder(c),window.qelm&&window.qelm.inputbox&&window.qelm.inputbox.init(c))},showActive:function(){var a='<div style="margin-top:10px;">\u4f60\u8fd8\u6ca1\u6fc0\u6d3b\u65b0\u7248\u7a7a\u95f4\uff0c\u6fc0\u6d3b\u4e4b\u540e\u5c31\u53ef\u4ee5\u7ee7\u7eed\u64cd\u4f5c\u4e86\u3002</div>';qui.alert(a,{width:400,height:50,title:"\u9700\u8981\u6fc0\u6d3b\u7a7a\u95f4\u624d\u80fd\u7ee7\u7eed\u64cd\u4f5c",buttons:[{text:"\u9a6c\u4e0a\u6fc0\u6d3b",type:"green",handler:function(){window.location=window.qDomain.qing+"/go/show/qurl"}}]})},showForbidSelf:function(){var a='<div style="margin-top:10px;">sorry\uff0c\u4f60\u7684ID\u8fdd\u53cd\u7a7a\u95f4\u534f\u8bae\u88ab\u5c01\u7981\uff0c\u5c01\u7981\u671f\u95f4\u5c06\u65e0\u6cd5\u53d1\u5e03\u4efb\u4f55\u5185\u5bb9</div><div style="margin-top:10px;">\u5982\u6709\u7591\u95ee\uff0c\u8bf7\u54a8\u8be2 <a href="http://tousu.baidu.com/hi/add" style="text-decoration:underline;">\u6295\u8bc9\u4e2d\u5fc3</a></div>';qui.alert(a,{width:420,height:90,title:"\u63d0\u793a"})}},qui.alert=qui.dialog.DialogManager.alert,qui.confirm=qui.dialog.DialogManager.confirm,qui.showMsg=qui.dialog.DialogManager.showMsg,qui.showIframe=qui.dialog.DialogManager.showIframe,qui.showLogin=qui.dialog.DialogManager.showLogin,qui.showDialog=qui.dialog.DialogManager.showDialog,qui.showActive=qui.dialog.DialogManager.showActive,qui.showForbidSelf=qui.dialog.DialogManager.showForbidSelf,qui.showNickname=qui.dialog.DialogManager.showNickname,qing.registNS("qui.message"),qui.message.Tip=qing.lang.createClass(function(a){var b={speed:400,autoclose:1e3,note:"",type:"success",boxclass:"x-message-box",contentclass:"x-message-content",iconclass:"x-message-icon",textclass:"x-message-text",statusclass:"x-message-status",shadowclass:"x-message-shadow",callback:function(){}};qing.object.extend(b,a);var c=null;qing.q(b["boxclass"]).length==0?(c=document.createElement("div"),document.body.insertBefore(c,document.body.childNodes[0])):(qing.dom.remove(qing.q(b.boxclass)[0]),c=document.createElement("div"),document.body.insertBefore(c,document.body.childNodes[0])),c.className=[b.boxclass," ",b.statusclass,"-",b.type].join(""),c.innerHTML=['<div class="',b.shadowclass,'"></div><div class="',b.contentclass,'"><a class="',b.iconclass,'" ></a><div class="',b.textclass,'"><pre>',b.note,"</pre></div></div>"].join("");var d=qing.q(b.shadowclass,c)[0],e=qing.q(b.contentclass,c)[0],f=qext.fn.getDimensions(e),g=4,h=!0,i=(qing.page.getViewWidth()-f.width-g*2)/2;d.style.width=f.width+g*2+"px",d.style.height=f.height+g+"px",c.style.left=i+"px",c.style.height=d.style.height,c.style.width=d.style.width;var j=qing.q(b.textclass,c)[0],f=qext.fn.getDimensions(j);qing.browser.ie!=undefined&&(qing.dom.opacity(d,.6),qing.dom.opacity(e,1),qing.browser.ie<7?(e.style.left=0,d.style.left="-4px",h=!1,c.style.position="absolute",c.style.top=qing.page.getScrollTop()+"px",c.style.setExpression("top","eval(document.documentElement.scrollTop)")):qing.browser.ie<8&&(d.style.left=0));if(h){c.style.top="-"+c.style.height,qing.dom.opacity(c,0);var k=qani.animate(c,{top:0,opacity:1},b.speed);k.on("finish",function(){setTimeout(function(){var a=qani.animate(c,{opacity:0},b.speed);a.on("finish",function(){qing.dom.remove(c),b.callback&&b.callback()})},b.autoclose)})}else setTimeout(function(){qing.dom.remove(c),b.callback&&b.callback()},b.autoclose+2*b.speed)}).extend({}),qing.registNS("qui.message"),qui.message.MsgManager={showSuccess:function(a,b){return new qui.message.Tip({note:a,callback:b})},showAlert:function(a,b){return new qui.message.Tip({note:a,type:"alert",callback:b})},showError:function(a,b){return new qui.message.Tip({note:a,type:"error",callback:b})},showNotice:function(a,b){return new qui.message.Tip({note:a,type:"notice",callback:b})},showQuestion:function(a,b){return new qui.message.Tip({note:a,type:"question",callback:b})},showForbidden:function(a,b){return new qui.message.Tip({note:a,type:"forbidden",callback:b})}},qui.showError=qui.message.MsgManager.showError,qui.showAlert=qui.message.MsgManager.showAlert,qui.showSuccess=qui.message.MsgManager.showSuccess,qui.showNotice=qui.message.MsgManager.showNotice,qui.showQuestion=qui.message.MsgManager.showQuestion,qui.showForbidden=qui.message.MsgManager.showForbidden,qing.registNS("qui.tip"),qui.tip.AbstractTip=qing.lang.createClass(function(a){var b="";a.closeable!==!1&&(b='<a id="#{closeBtn}" href="#" onclick="return false;" class="x-tip-closebtn"></a>');var c=['<div id="#{entity}">','<div id="#{contentBox}" class="x-tip-content-box">','<div id="#{content}" class="x-tip-content"></div>','<div id="#{btnPanel}" class="x-tip-btnPanel"></div>',"</div>",b,'<div id="#{triangle}">','<div class="x-tip-triangle"></div>','<div class="x-tip-triangle-inner"></div>',"</div>","</div>"].join("");this.setTemplate(c);var d=this.getProperty();a.closeable!==!1&&this._on(d.nodes.closeBtn,"click",this.close,this),a.buttons?this._addButton(a.buttons):d.nodes.btnPanel.style.display="none",this._on(window,"resize",this.update,this)},{superClass:qui.Layer}).extend({update:function(){var a=this.getProperty();this.setTarget(a.target,a.anchor,a.offset,a.fix)},setTarget:function(a,b,c,d){if(!a||!qing.g(a))return!1;a=qing.g(a),b=b||"bottom",c=qing.extend({x:0,y:0},c);var e=this.getProperty(),f={height:"top"==b||"bottom"==b?e.triangleSize[1]:e.triangleSize[0],width:"top"==b||"bottom"==b?e.triangleSize[0]:e.triangleSize[1],x:0,y:0},g="1022";e.target=a,e.anchor=b,e.offset=c,e.fix=d;var h=a.offsetWidth,i=a.offsetHeight,j=qing.dom.getPosition(a),k=j.left,l=j.top,m=.618;if("top"==b||"bottom"==b){var n=k+h/2,o=e.nodes.entity.offsetWidth,p=Math.round(o*m);e.x=n+p*3/2-o-10,n+p>qing.page.getWidth()&&(e.x=qing.page.getWidth()-o),e.x<0&&(e.x=0),f.x=n-e.x-f.width*.5}"top"==b?(e.y=l-e.nodes.entity.offsetHeight-f.height,f.y=e.nodes.entity.offsetHeight-2):"bottom"==b&&(e.y=l+i+f.height,f.y=-f.height);if("right"==b||"left"==b){var n=l+i/2,q=e.nodes.entity.offsetHeight,r=Math.round(q*m);e.y=n+r-q,f.y=n-e.y-f.height*.5}"right"==b&&(e.x=k+h+f.width,f.x=-f.width),"left"==b&&(e.x=k-e.nodes.entity.offsetWidth-f.width,f.x=e.nodes.entity.offsetWidth-1),e.y+=c.y,e.x+=c.x,qing.dom.addClass(e.nodes.triangle,"x-tip-triangle-"+b);if(d){var s=e.nodes.entity.offsetWidth,t=e.nodes.entity.offsetHeight,u=0,v=0,w={};switch(d.pos){case"left":w.x=qing.dom.getPosition(d.target).left-1;break;case"right":w.x=qing.dom.getPosition(d.target).left+qext.fn.getDimensions(d.target).width+1;break;case"top":w.y=qing.dom.getPosition(d.target).top-1;break;case"bottom":w.y=qing.dom.getPosition(d.target).top+qext.fn.getDimensions(d.target).height+1}switch(d.ori){case"left":u=w.x-e.x;break;case"right":u=w.x-s-e.x;break;case"top":v=w.y-e.y;break;case"bottom":v=w.y-t-e.y}e.x+=u,e.y+=v,f.x-=u,f.y-=v,d.zIndex&&(g=d.zIndex)}qing.setStyles(e.nodes.triangle,{left:f.x+"px",top:f.y+"px"}),this.isShow&&qing.setStyles(this.dom,{left:e.x+"px",top:e.y+"px"}),qing.array.each([e.nodes.entity,this.dom,this._ifm],function(a){a&&qing.setStyles(a,{zIndex:g})}),d&&d.isFixed&&qing.setStyles(this.dom,{position:"fixed"}),d&&d.callback&&d.callback(this)},_addButton:function(a){var b=this,c=[];qing.array.each(a,function(a){var b="green"==a.type?"btn-s btn-12":"btn-g btn-12";c.push('<a href="#" onclick="return false;" class="x-dialog-btn '+b+'">'+a.text+"</a>")});var d=this.getProperty();d.nodes.btnPanel.innerHTML=c.join("");var e=d.nodes.btnPanel.getElementsByTagName("a");qing.array.each(a,function(a,c){a.handler&&qing.lang.isFunction(a.handler)&&b._on(e[c],"click",a.handler,a.scope)})}}),qing.registNS("qui.tip"),qui.tip.SimpleTip=qing.lang.createClass(function(a){var b=this.getProperty();b.triangleSize=[12,6],qing.dom.addClass(b.nodes.entity,"x-simple-tip"),qing.lang.isNumber(a.width)&&qing.setStyle(b.nodes.content,"width",a.width+"px"),qing.lang.isNumber(a.height)&&qing.setStyle(b.nodes.content,"height",a.height+"px"),b.nodes.content.innerHTML=a.msg,this.setTarget(a.target,a.anchor,a.anchorOffset,a.fix)},{superClass:qui.tip.AbstractTip}).extend({_init:function(){}}),qing.registNS("qui.tip"),qui.tip.FixedTip=qing.lang.createClass(function(a){var b=this.getProperty();b.triangleSize=[12,6];var c="x-fixed-tip";a.customClass&&(c=[c,a.customClass].join(" ")),qing.dom.addClass(b.nodes.entity,c),qing.lang.isNumber(a.width)&&qing.setStyle(b.nodes.content,"width",a.width+"px"),qing.lang.isNumber(a.height)&&qing.setStyle(b.nodes.content,"height",a.height+"px"),b.nodes.content.innerHTML=a.msg,a.fix=a.fix||{};if(!qing.browser.ie||qing.browser.ie>6)a.fix.isFixed=!0;a.fix.callback=a.fix.callback||function(b){b.center({top:qing.g(a.target).offsetHeight})},this.setTarget(a.target,a.anchor,a.anchorOffset,a.fix)},{superClass:qui.tip.AbstractTip}).extend({_init:function(){}}),qing.registNS("qui.tip"),qui.tip.Tip=qing.lang.createClass(function(a){var b=this.getProperty();b.triangleSize=[12,6],qing.dom.addClass(b.nodes.entity,"x-tip"),qing.lang.isNumber(a.width)&&(qing.setStyle(b.nodes.content,"width",a.width+"px"),qing.browser.ie<7&&qing.setStyle(b.nodes.contentBox,"width",a.width+"px")),qing.lang.isNumber(a.height)&&qing.setStyle(b.nodes.content,"height",a.height+"px"),b.nodes.content.innerHTML=a.msg,a.buttons?this._addButton(a.buttons):b.nodes.btnPanel.style.display="none",this.setTarget(a.target,a.anchor,a.anchorOffset)},{superClass:qui.tip.AbstractTip}).extend({_addButton:function(a){var b=this,c=[];qing.array.each(a,function(a){var b="silver"==a.type?"btn-s btn-12":"btn-g btn-12";c.push('<a href="#" onclick="return false;" class="x-tip-btn '+b+'">'+a.text+"</a>")});var d=this.getProperty();d.nodes.btnPanel.innerHTML=c.join("");var e=d.nodes.btnPanel.getElementsByTagName("a");qing.array.each(a,function(a,c){a.handler&&qing.lang.isFunction(a.handler)&&b._on(e[c],"click",function(c){a.handler(b,c)},a.scope)})}}),qing.registNS("qui.tip"),qui.tip.TipManager={showTip:function(a){var b=new qui.tip.Tip(a);b.show()},showSimpleTip:function(a){var b=new qui.tip.SimpleTip(a);return b.show(a),b},showClickonceTip:function(){var a=['<div class="tip-title">\u6211\u4eec\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\u5c5e\u4e8e\u60a8\u7684\u767e\u5ea6\u7a7a\u95f4</div>'].join(""),b={target:"modTopbar",customClass:"x-fixed-tip-clickonce",fix:{zIndex:1002,callback:function(a){a.center({top:qing.g(b.target).offsetHeight-4})}},buttons:[{text:"\u4e00\u952e\u6fc0\u6d3b",type:"green",handler:function(
){var a=[window.qDomain.qing,"/go/submit/quickspurl"].join(""),b,c=this;qing.ajax.post(a,{},function(a){c.close(),qui.showSuccess("\u606d\u559c\u60a8\u6210\u529f\u5f00\u901a\u767e\u5ea6\u7a7a\u95f4")},function(a){var b=a.errorMsg;qui.showError(b)})}}],msg:a},c=new qui.tip.FixedTip(b);return c.show(b),c},showTopGuideTip:function(){var a=['<div class="tip-title">\u767e\u5ea6\u7a7a\u95f4\uff0c\u8ba9\u4e16\u754c\u53d1\u73b0\u4f60</div>','<div class="tip-desc">\u5411\u4e16\u754c\u5c55\u793a\u81ea\u5df1\uff0c\u53d1\u5e03\u559c\u7231\u7684\u56fe\u7247\u3001\u6587\u5b57\u548c\u97f3\u4e50</div>'].join(""),b={target:"modTopbar",fix:{zIndex:1002,callback:function(a){a.center({top:qing.g(b.target).offsetHeight-4})}},buttons:[{text:"\u7b80\u5355\u6ce8\u518c",type:"green",handler:function(){this.close(),window.location.href=[window.qDomain.qing,"/go/reg?pmfrom=topguidetip"].join("")}},{text:"\u767b\u5f55",handler:function(){qui&&qui.showLogin?qui.showLogin():(this.close(),window.location.href="/go/login?pmfrom=topguidetip")}}],msg:a},c=new qui.tip.FixedTip(b);return c.show(b),c}},qui.showTip=qui.tip.TipManager.showTip,qui.showSimpleTip=qui.tip.TipManager.showSimpleTip,qui.showTopGuideTip=qui.tip.TipManager.showTopGuideTip,qui.showClickonceTip=qui.tip.TipManager.showClickonceTip,qing.registNS("qui"),qui.tab=function(){var a=function(a){},b={container:['<div class="tab clearfix">','<div class="tab-vernier"></div>','<ul class="tab-ul">',"#{li}","</ul>","</div>",'<div class="tab-bottom-line"></div>'].join(""),li:['<li class="tab-li #{class}">',"#{text}","</li>"].join(""),a:'<a class="#{class}" href="#{href}" target="#{target}">#{name}</a>',span:'<span class="#{class}">#{name}</span>'},c=function(a){var c=[],d,e,f;for(var g in a)d=a[g],e=d["class"],liClass="",/^[\x20-\x7E]+$/.test(g)&&(liClass="tab-li-ascii"),d.selected&&(liClass=[liClass,"tab-li-selected"].join(" ")),d.href?c.push(qing.string.format(b.li,{text:qing.string.format(b.a,{href:d.href,target:d.target||"_self","class":e,name:g}),"class":liClass})):c.push(qing.string.format(b.li,{text:qing.string.format(b.span,{"class":e,name:g}),"class":liClass}));return f=qing.string.format(b.container,{li:c.join("")}),f},d={init:a,getHTML:c};return d}();var Zero=window.Zero||{};qext.back2top=function(){var a,b=T.browser.ie===6,c=function(){return window},d=function(){var a=c(),b=T.browser.isWebkit?a.document.body:a.document.documentElement;return b},e=function(e){var f=e||{};a=function(){var a=[f.bottom?"bottom:"+f.bottom+";":"bottom:1%;",f.left?"margin-left:"+f.left+"px;":"margin-left:490px;","width:57px;","height:57px;","overflow:hidden;","cursor:pointer;","left:50%;","-webkit-transition-duration:0.2;","-webkit-transition-property:opacity;","-moz-transition-duration:0.2;","-moz-transition-property:opacity;","-o-transition-duration:0.2;","-o-transition-property:opacity;","transition-duration:0.2;","transition-property:opacity;"].join(""),b=[].join(""),c=qing.dom.create("div",{style:a,id:"qBack2topBtn"}),d='<div class="back2top-icon-bg"></div><div class="back2top-icon-real"></div>',e=qing.dom.create("div",{"class":"back2top-ani-icon",style:b});e.innerHTML=d;var g,h=function(){return c.style.WebkitTransition||c.style.MozTransition||c.style.OTransition||c.style.transition?function(){c.style.opacity=1}:function(){g=qani.animate(c,{opacity:.6},{opacity:1})}}(),i=function(){return c.style.WebkitTransition||c.style.MozTransition||c.style.OTransition||c.style.transition?function(){c.style.opacity=.6}:function(){g.stop(),g=qani.animate(c,{opacity:1},{opacity:.6})}}();c.appendChild(e),document.body.appendChild(c);var j=qing.q("back2top-icon-real",c)[0];return j&&(qing.event.on(j,"mouseover",h,200),qing.event.on(j,"mouseout",i,200),f.backgroundImage&&qing.dom.setStyles(j,{"background-image":["url("+f.backgroundImage+")"].join("")})),c}(),qing.dom.ready(function(){Zero.scrollStopListener=function(){function g(d){b=setInterval(function(){typeof e=="undefined"?e=a.scrollTop:(f=a.scrollTop,f===e?d.onstop.call(c()):d.onscrolling.call(c()),e=a.scrollTop)},100)}function h(){clearInterval(b)}var a=d(),b,e,f;return{init:g,unStop:h}}();var e=d(),f=function(c){function e(b){a.isShow&&(a.style.opacity=0,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:0)",a.isShow=!1,a.style.display="none"),d||(Zero.scrollStopListener.init({onstop:function(){Zero.scrollStopListener.unStop(),d=!1;if(c.scrollTop>400){if(!a.isShow){T.dom.setStyles(a,{bottom:"1%"});var b=qani.animation({obj:a,changes:{type:"opacity",from:0,to:.6,tween:"even"}},200);b.start(),a.style.display="block",a.isShow=!0}}else a.isShow&&(a.style.opacity=0,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:0)",a.isShow=!1,a.style.display="none")},onscrolling:function(){a.isShow&&(a.style.opacity=0,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:0)",a.isShow=!1)}}),d=!0)}function f(b){if(c.scrollTop>400){if(!a.isShow){var d=qani.animation({obj:a,changes:{type:"opacity",from:0,to:.6,tween:"even"}},200);d.start(),a.style.display="block",a.isShow=!0}}else if(a.isShow){var d=qani.animation({obj:a,changes:{type:"opacity",from:.6,to:0,tween:"even"}},200);d.start(),d.on("finish",function(){a.style.display="none"}),a.isShow=!1}}var d=!1;return b?e:f}(e),g=b?"absolute":"fixed";qing.dom.setStyle(a,"position",g),e.scrollTop<=400?(a.style.opacity=0,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:0)",a.isShow=!1,a.style.display="none"):(b&&T.dom.setStyles(a,{bottom:"1%"}),a.style.display="block",a.isShow=!0),T.event.on(a,"click",function(a){var b=parseInt(e.scrollTop*.2),c=b>500?500:b,d=qani.animation({obj:e,changes:{type:"scroll",to:0,tween:"strongDecelerate"}},c);d.start()}),T.event.on(c(),"scroll",f)})};return{init:e}}(),qing.registNS("qext"),function(){qext.Textarea=qing.lang.createClass(function(a){this.autoHeight=a.autoHeight==null?!1:a.autoHeight,this.autoRender=a.autoRender==null?!1:a.autoRender,this.autoFocus=a.autoFocus==null?!1:a.autoFocus,this.gbkMaxSize=a.gbkMaxSize,this.changeCallback=a.callback,this.autoRender&&this.render(a.element)},{}).extend({classPrefix:"x-qing-textarea",render:function(a){if(!a)return;this.dom=qing.g(a),this.dom.style.overflow="hidden";if(this.autoHeight){var b=this;qing.event.on(this.dom,"keyup",function(){b.onInputKeyup()}),qing.event.on(this.dom,"mouseup",function(){b.onInputKeyup()}),qing.event.on(this.dom,"focus",function(){b.onInputKeyup()})}this.initHeight=parseInt(qing.dom.getStyle(this.dom,"height").replace("px","")),this.autoFocus&&this.dom.focus(),this.gbkMaxSize&&this.gbkMaxLengthLimite(this.dom,this.gbkMaxSize,this.changeCallback)},onInputKeyup:function(){var a=this.dom,b=T.g("__hidetextarea");b||(b=document.createElement("textarea"),b.id="__hidetextarea",b.style.borderWidth=0,document.body.appendChild(b)),b.value=a.value,b.style.height="0px",b.style.overflow="hidden",T.dom.setStyle(b,"line-height",T.dom.getStyle(a,"line-height")),T.dom.setStyle(b,"width",T.dom.getStyle(a,"width"));var c=b.scrollHeight;delete c,a.style.height=Math.max(this.initHeight,b.scrollHeight-b.clientHeight)+"px"},gbkMaxLengthLimite:function(a,b,c){var d=!0;qing.event.on(a,"keyup",function(a){var e=this;setTimeout(function(){var a=qing.string.getByteLength(e.value);d=a>=b*2?!1:!0,c&&c(a)},0)}),qing.event.on(a,"focus",function(){c&&c(qing.string.getByteLength(this.value))}),qing.event.on(a,"cute",function(a){var e=qing.string.getByteLength(self.value);d=e>=b*2?!1:!0,c&&c(qing.string.getByteLength(this.value))}),qing.event.on(a,"paste",function(a){var e=this;if(!d)return qing.event.preventDefault(a),!1;setTimeout(function(){var a=qing.string.getByteLength(e.value);d=a>=b*2?!1:!0,c&&c(a)},0)})},getClass:function(a){return a!=null&&qing.string.trim(a)!=""?this.classPrefix+"-"+a:this.classPrefix}}),qext.textarea=function(a){return new qext.Textarea(a)}}(),qing.registNS("qext"),qext.autosubmit=function(){var a=function(){var a=qing.q("autosubmit");for(var b in a)qing.on(a[b],"keyup",function(a){var b=a.which||a.keyCode,c=parseInt(b,10)==13,d=this;if(!c)return;d.tagName.toLowerCase()!="form"&&(d=qing.dom.getAncestorByTag(this,"form")),d&&qing.dom.hasClass(d,"autosubmit-ctrl")&&(c=a.ctrlKey&&c);if(c){if(qext.autosubmit.precheck&&qing.lang.isFunction(qext.autosubmit.precheck)){var e=qext.autosubmit.precheck(d);if(e!==!0)return}var f=qing.q("autosubmit-button",d)[0];f||(f=qing.dom.create("input",{type:"submit"}),qing.dom.setStyles(f,{position:"absolute",left:"-100000px"}),d.appendChild(f)),qing.event.fire(f,"click")}})},b=function(a,b){if(!a)return!1;a.constructor!=Array&&(a=[a]),qing.array.each(a,function(a){qing.on(a,"keyup",function(a){var c=a.which||a.keyCode;a.ctrlKey&&c==13&&b.call(this,a)})})},c=function(){qing.dom.ready(function(){a()})};return{init:c,bindCtrlEnter:b}}(),qext.autosubmit.init(),qing.registNS("qext"),qext.statistics=qext.stat=function(){var a=function(a,b){b=b||"",c("http://hi.baidu.com/sys/statlog/1.gif?m="+encodeURIComponent(a)+"&v="+encodeURIComponent(b)+"&_t="+Math.random())},b=function(a,b){var d=109,e=2009,f="http://nsclick.baidu.com/v.gif?pid="+d+(b?"&"+qing.url.jsonToQuery(b):"")+"&type="+e+"&m="+a+"&_t="+Math.random();c(f)},c=function(a){var b="imglog__"+(new Date).getTime(),c=window[b]=new Image;c.onload=c.onerror=function(){window[b]=null},c.src=a,c=null},d=function(a){if(typeof a=="string"){function c(a,b){var a=a;while(a){if(a.className&&T.dom.hasClass(a,b))return a;a=T.dom.getParent(a)}return!1}var d=a;T.event.on(document.body,"mousedown",function(a){var e=a.target||a.srcElement,f=c(e,d);if(f.className&&f){var g=T.dom.getAttr(f,"data-nsclick"),h=g.match(/\S+/g);for(var i=0,j=h.length;i<j;i++)b(h[i])}});return}var e=[].concat(a);for(var f=0,g=e.length;f<g;f++){var h=T.dom.g(e[f]);T.event.on(h,"mousedown",function(a){var b=this,c=T.dom.getAttr(b,"data-nsclick");qing.ext.stat.ns_trackerLink(c)})}},e={qing:a,ns:b,bindNS:d,img:c};return e}(),qing.registNS("qext"),qext.statProxy=function(a){if(typeof a=="string"){function b(a,b){var a=a;while(a){if(a.className&&T.dom.hasClass(a,b))return a;a=T.dom.getParent(a)}return!1}var c=a;T.event.on(document.body,"mousedown",function(a){var d=a.target||a.srcElement,e=b(d,c);if(e.className&&e){var f=T.dom.getAttr(e,"data-nsclick"),g=f.match(/\S+/g);for(var h=0,i=g.length;h<i;h++)qext.stat.ns(g[h])}});return}var d=[].concat(a);for(var e=0,f=d.length;e<f;e++){var g=T.dom.g(d[e]);T.event.on(g,"mousedown",function(a){var b=this,c=T.dom.getAttr(b,"data-nsclick");qing.ext.stat.ns_trackerLink(c)})}},qing.dom.ready(function(){qext.statProxy("qing-stat-nsclick")}),qing.registNS("qext.pager"),qext.pager=function(){var a=[],b={allCount:0,pageSize:10,curPage:1,linkCount:10,button:["number","first","next","prev","last"],tpl:{normal:'<a href="?page=#{pn}" hidefocus>#{text}</a>',selected:"<span>#{text}</span>",first:'<a href="?page=#{pn}" class="first">#{text}</a>',last:'<a href="?page=#{pn}" class="last">#{text}</a>',next:'<a href="?page=#{pn}" class="next">#{text}</a>',prev:'<a href="?page=#{pn}" class="prev">#{text}</a>'},text:{first:"\u9996\u9875",next:"\u4e0b\u4e00\u9875&gt;&gt;",prev:"&lt;&lt;\u4e0a\u4e00\u9875",last:"\u5c3e\u9875"},callback:function(){}},c=function(){b.allPageCount>1?(qing.g(b.container).innerHTML=['<div class="mod-pagerbar">',a.join(""),"</div>"].join(""),qing.dom.setStyle(b.container,"display","block")):qing.dom.setStyle(b.container,"display","none"),b.callback&&typeof b.callback=="function"&&b.callback()},d=function(d){d.tpl=qing.object.extend(b.tpl,d.tpl),d=qing.object.extend(b,d),d.step=parseInt(d.step,10)||1,d.allCount=parseInt(d.allCount,10),d.pageSize=parseInt(d.pageSize,10),d.curPage=parseInt(d.curPage,10),d.linkCount=parseInt(d.linkCount,10);var e=d.button.join(",");b=d,a=[];var f=Math.floor(d.allCount/d.pageSize);d.allCount%d.pageSize!==0&&(f+=1),b.allPageCount=f;if(f<=1){c();return}d.curPage=d.curPage<1?1:d.curPage>f?f:d.curPage;var g=Math.max(1,d.curPage-parseInt(d.linkCount/2,10)),h=Math.min(g+d.linkCount-1,f),g=Math.max(1,h-d.linkCount+1);g>1&&e.indexOf("first")>=0?a.push(qing.string.format(d.tpl.first,{pn:1,text:d.text.first})):d.tpl&&d.tpl.firstNone&&a.push(d.tpl.firstNone),d.curPage>1&&e.indexOf("prev")>=0?a.push(qing.string.format(d.tpl.prev,{pn:(d.curPage-2)*d.step+1,text:d.text.prev})):d.tpl&&d.tpl.prevNone&&a.push(d.tpl.prevNone);if(e.indexOf("number")>=0)for(var i=g;i<=h;i++)i===d.curPage?a.push(qing.string.format(d.tpl.selected,{text:i})):a.push(qing.string.format(d.tpl.normal,{pn:(i-1)*d.step+1,text:i}));d.curPage<f&&e.indexOf("next")>=0?a.push(qing.string.format(d.tpl.next,{pn:d.curPage*d.step+1,text:d.text.next})):d.tpl&&d.tpl.nextNone&&a.push(d.tpl.nextNone);if(h<f&&e.indexOf("last")>=0){d.step=parseInt(d.step,10)||1,d.allCount=parseInt(d.allCount,10),d.pageSize=parseInt(d.pageSize,10),d.curPage=parseInt(d.curPage,10),d.linkCount=parseInt(d.linkCount,10);var j=f;if(d.step){var k=d.pageSize/d.step,l=Math.ceil(d.allCount/k),m=l%d.step;m>0?j=l-m+1:j=l-d.step+1}a.push(qing.string.format(d.tpl.last,{pn:j,text:d.text.last}))}else d.tpl&&d.tpl.lastNone&&a.push(d.tpl.lastNone);c()};return{init:d}}(),qing.registNS("qext"),function(){function a(a){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$')).test(a)}function c(){var a=null;return a=document.createElement("input"),a.type="hidden",a.addBehavior("#default#userData"),document.body.appendChild(a),a}function d(a,b){try{var d=c(),e=b||{};if(e.expires){var f;"number"==typeof e.expires&&(f=new Date,f.setTime(f.getTime()+e.expires)),d.expires=f.toUTCString()}d.setAttribute(e.key,e.value),d.save(e.key)}catch(g){}}function e(a,c){d(a,c);var e=f({key:b});e?e={key:b,value:e}:e={key:b,value:""},(new RegExp("(^|\\|)"+a+"(\\||$)","g")).test(e.value)||(e.value+="|"+a,d(b,e))}function f(a){try{var b=c();return b.load(a.key),b.getAttribute(a.key)||null}catch(d){return null}}function g(a){try{var e=c();e.load(a.key),e.removeAttribute(a.key);var g=new Date;g.setTime(g.getTime()-1),e.expires=g.toUTCString(),e.save(a.key);var h=f({key:b});h&&(h=h.replace(new RegExp("(^|\\|)"+a.key+"(\\||$)","g"),""),h={key:b,value:h},d(b,h))}catch(i){}}function h(){result=f({key:b});if(result){var a=result.split("|"),c=a.length;for(var d=0;d<c;d++)!a[d]||g({key:a[d]})}}function i(){var a=[],c=f({key:b});if(c){c=c.split("|");for(var d=0,e=c.length;d<e;d++)!c[d]||a.push(c[d])}return a}var b="_baidu.ALL.KEY_",j="localStorage"in window&&window.localStorage!==null,k=!!qing.browser.ie;qext.LocalStorage={isAvailable:j||k,set:function(b){var c=function(b){if(!a(b.key))return;var c=b||{};j?(window.localStorage.setItem(c.key,c.value),b.expires&&window.localStorage.setItem(c.key+".expires",c.expires)):k&&e(b.key,c)};if(b&&b.constructor===Array&&b instanceof Array)for(var d=0,f=b.length;d<f;d++)c(b[d]);else b&&c(b)},get:function(b){var c=function(b){var c=null;typeof b=="string"&&(b={key:b});if(!a(b.key))return c;if(j){c=window.localStorage.getItem(b.key);if(c){var d=window.localStorage.getItem(b.key+".expires");c={value:c,expires:d?new Date(d):null},c&&c.expires&&c.expires<new Date&&(c=null,window.localStorage.removeItem(b.key))}}else k&&(c=f(b),c&&(c={value:c}));return c?c.value:null},d=null;if(b&&b.constructor===Array&&b instanceof Array){d=[];for(var e=0,g=b.length;e<g;e++)d.push(c(b[e]))}else b&&(d=c(b));return d},remove:function(a){var b=function(a){j?(window.localStorage.removeItem(a.key),window.localStorage.removeItem(a.key+".expires")):k&&g(a)};if(a&&a.constructor===Array&&a instanceof Array)for(var c=0,d=a.length;c<d;c++)b(a[c]);else a&&b(a)},clearAll:function(){j?window.localStorage.clear():k&&h()},getAllKeys:function(){var a=[];if(j){var b;for(var c=0,d=window.localStorage.length;c<d;c++)b=window.localStorage.key(c),/.+\.expires$/.test(b)||a.push(b)}else k&&(a=i());return a}}}(),qing.registNS("qext"),function(a){if(a.placeholder)return;var b={className:"placeholder",classHolder:"label-placeholder",attrName:"placeholder",attrStyleName:"data-placeholder",attrStashName:"stash-placeholder"},c=function(a){var b=qing.dom.getStyle(a,"z-index"),c=a,d,e;while(c.parentNode){c=c.parentNode;if(c.nodeName.toLowerCase()==="body")break;var f=qing.dom.getStyle(c,"z-index");qing.lang.isNumber(f)&&(d=f)}return qing.lang.isNumber(d)?e=d:qing.lang.isNumber(b)?e=b:e=0,e},d=function(a,b){return function(){setTimeout(function(){f(a,b)},10)}},e=function(a,b){var c=a.id;if(!c)return;var d=["labelFor",c].join(""),e=qing.g(d);if(document.activeElement){var f=document.activeElement;f==a&&(b="hide")}b==="hide"||a.value!=""?e&&qing.dom.hide(e):e?qing.dom.show(e):j(a)},f=function(a,b){var c={},d=qing.dom.getPosition(b);c.top=d.top,c.left=d.left,k(a,c)},g=function(){var a=this.getAttribute(b.attrName);if(a===""||a===null)return;this.setAttribute(b.attrStashName,a),this.setAttribute(b.attrName,"")},h=function(){if(this.value==""){var a=this.getAttribute(b.attrStashName);if(a===""||a===null)return;this.setAttribute(b.attrName,a)}},i=function(a){qing.event.un(a,"focus",g),qing.event.un(a,"blur",h),qing.event.on(a,"focus",g),qing.event.on(a,"blur",h)},j=function(a){if(!qing.browser.ie)return i(a);var f=a.id;if(!f)return;var g=["labelFor",f].join(""),h=qing.g(g);h&&qing.dom.remove(h),h=qing.dom.create("label"),qing.event.on(a,"focus",function(){e(this,"hide")}),qing.event.on(a,"blur",function(){e(this)}),h.id=g,h.setAttribute("for",f),qing.dom.addClass(h,b.classHolder),h.innerHTML=a.getAttribute(b.attrName);var j=a.getAttribute(b.attrStyleName),l={};if(j){var m=/\s*([A-z\_0-9\-]+)\s*\:\s*([^\;]+)(?:\;)?/gi,n;while((n=m.exec(j))!==null)l[n[1]]=n[2]}l["z-index"]===undefined&&(l["z-index"]=parseInt(c(a),10)+1),l.color===undefined&&(l.color="#ddd"),l["text-indent"]===undefined&&(l["text-indent"]="10px"),l.position===undefined&&(l.position="absolute");var o=qing.dom.getPosition(a);l.top=o.top,l.left=o.left;if(l["line-height"]===undefined){var p=parseInt(qing.dom.getStyle(a,"line-height"),10);p||(p=parseInt(qing.dom.getStyle(a,"height"),10)),isNaN(p)&&(p=0),p+=20,p+="px",l["line-height"]=p}k(h,l),qing.event.on(h,"click",function(){a.focus()}),document.body.appendChild(h),e(a),qing.on(window,"resize",d(h,a))},k=function(a,b){qing.dom.setStyles(a,b)};a.placeholder=j,qing.dom.ready(function(){var a=qing.q(b.className);for(var c=0,d=a.length;c<d;c++)j(a[c])})}(qext),qext.event={},qext.event.create=function(a,b){qext.event.events=qext.event.events||{};var c=qext.event.events;if(a in c){var d=c[a];for(var e=0,f=d.length;e<f;e++)if(d[e].src===b)throw new Error("The event has been created")}c[a]=c[a]||[],c[a].push({src:b,callback:[]})},qext.event.addEventListener=function(a,b,c){var d=qext.event.events[b];if(!d)throw new Error("The event of "+b+" is undefind");if(typeof c!="function")throw new Error("The thrid argument must be a  Function");var e=!1;for(var f=0,g=d.length;f<g;f++)if(a.constructor===d[f].src||a instanceof d[f].src){d[f].callback.push({obj:a,fn:c}),e=!0;break}if(!e)throw new Error("The obj type is not support for this event")},qext.event.removeEventListener=function(a,b,c){var d=qext.event.events[b];if(!d)throw new Error("The event of "+b+" is undefind");if(typeof c!="function")throw new Error("The thrid argument must be a  Function");var e=!1;for(var f=0,g=d.length;f<g;f++)if(a.constructor===d[f].src||a instanceof d[f].src){var h=d[f].callback;for(var i=0,g=h.length;i<g;i++)h[i].fn===c&&h[i].obj===a&&h.splice(i,1);e=!0;break}if(!e)throw new Error("The obj type is not support for this event")},qext.event.engine=function(a,b){var c=qext.event.events[a];for(var d=0,e=c.length;d<e;d++)if(b.constructor===c[d].src||b instanceof c[d].src){var f=c[d].callback;for(var g=0,e=f.length;g<e;g++){var h=f[g];b===h.obj&&h.fn.apply(h.obj,[].slice.call(arguments,2))}break}};var qani={};qani.animation=qani.animation=function(a,b){return new qani.Animation(a,b)},qani.animation.status={INITIALED:0,STATED:1,STOPED:2,CONTINUE:3,RESETED:4,FINISH:5,BACK:6},qani.animation.ext={},qani.Animation=function(a,b){this.animer=a,this.duration=b||500,this.animer.changes=[].concat(this.animer.changes),this.isRunning=!1,this.passedTime=0,this.status=qani.animation.status.INITIALED},qext.event.create("onstart",qani.Animation),qext.event.create("onstop",qani.Animation),qext.event.create("oncontinue",qani.Animation),qext.event.create("onfinish",qani.Animation),qext.event.create("onreset",qani.Animation),qext.event.create("onrenderbegin",qani.Animation),qext.event.create("onrenderend",qani.Animation),qani.Animation.tween={even:function(a,b,c,d,e){return a+(b-a)*(c-d)/e},accelerate:function(a,b,c,d,e){var f=(c-d)/e;return a+(b-a)*f*f},strongAccelerate:function(a,b,c,d,e){var f=(c-d)/e;return a+(b-a)*f*f*f*f},decelerate:function(a,b,c,d,e){var f=(c-d)/e;return a-(b-a)*f*(f-2)},strongDecelerate:function(a,b,c,d,e){var f=(c-d)/e;return a-(b-a)*((f-=1)*f*f*f-1)},ac2deCelerate:function(a,b,c,d,e){var f=(c-d)/e;return(f/=.5)<1?a+(b-a)/2*f*f:a-(b-a)/2*(--f*(f-2)-1)},strongAc2deCelerate:function(a,b,c,d,e){var f=(c-d)/e;return(f/=.5)<1?a+(b-a)/2*f*f*f*f:a-(b-a)/2*((f-=2)*f*f*f-2)},back2accelerate:function(a,b,c,d,e){var f=(c-d)/e,d=1.70158;return a+(b-a)*f*f*((d+1)*f-d)},accelerate2back:function(a,b,c,d,e){var f=(c-d)/e,d=1.70158;return a+(b-a)*((f-=1)*f*((d+1)*f+d)+1)},back2back:function(a,b,c,d,e){var f=(c-d)/e,d=1.70158;return(f/=.5)<1?a+(b-a)/2*f*f*(((d*=1.525)+1)*f-d):a+(b-a)/2*((f-=2)*f*(((d*=1.525)+1)*f+d)+2)},bounce2Accelerate:function(a,b,c,d,e){var f=1-(c-d)/e;return f<1/2.75?a+(b-a)*(1-7.5625*f*f):f<2/2.75?a+(b-a)*(.25-7.5625*(f-=1.5/2.75)*f):f<2.5/2.75?a+(b-a)*(.0625-7.5625*(f-=2.25/2.75)*f):a+(b-a)*(.015625-7.5625*(f-=2.625/2.75)*f)},accelerate2bounce:function(a,b,c,d,e){var f=(c-d)/e;return f<1/2.75?a+(b-a)*7.5625*f*f:f<2/2.75?a+(b-a)*(7.5625*(f-=1.5/2.75)*f+.75):f<2.5/2.75?a+(b-a)*(7.5625*(f-=2.25/2.75)*f+.9375):a+(b-a)*(7.5625*(f-=2.625/2.75)*f+.984375)},bounce2bounce:function(a,b,c,d,e){var f=(c-d)/e,g=qani.Animation.tween;return f<.5?(g.bounce2Accelerate(a,b,c,d,e/2)+a)*.5:g.accelerate2bounce(a,b,2*c-e,2*d,e)*.5}},qani.Animation.numeric={pxParse:function(a){return parseInt(a)},pxMulParse:function(a){var b=typeof a=="string"?a.split(" "):a,c=b.length;for(var d=0;d<c;d++)b[d]=parseInt(b[d])||0;switch(c){case 4:break;case 3:b[3]=b[2];break;case 2:b[3]=b[0],b[2]=b[1];break;case 1:b[3]=b[2]=b[1]=b[0]}return b}},qani.Animation.denumeric={pxParse:function(a){if(typeof a!="number")throw new Error("Type of argument must be a number");return a+"px"},pxMulParse:function(a){if(!typeof a==="array")throw new Error("Type of argument must be a array");var b=[];for(var c=0,d=a.length;c<d;c++)b.push(a[c]+"px");return b.join(" ")}},qani.Animation.getData={getStyle:function(a,b){return T.dom.getStyle(a,b)}},qani.Animation.setData={setStyle:function(a,b,c){return T.dom.setStyle(a,b,c)}},qani.Animation.defaultVal={numeric:qani.Animation.numeric.pxParse,denumeric:qani.Animation.denumeric.pxParse,getData:qani.Animation.getData.getStyle,setData:qani.Animation.setData.setStyle,tween:qani.Animation.tween.even},qani.Animation.typeInfos=function(){var a=["width","height","top","right","bottom","left","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","font-size"],b={},c=qani.Animation.defaultVal;for(var d=0,e=a.length;d<e;d++)b[a[d]]={},b[a[d]].numeric=qani.Animation.defaultVal.numeric,b[a[d]].denumeric=qani.Animation.defaultVal.denumeric,b[a[d]].getData=qani.Animation.defaultVal.getData,b[a[d]].setData=qani.Animation.defaultVal.setData,b[a[d]].tween=qani.Animation.defaultVal.tween;return b}(),qani.Animation.typeInfos.margin=qani.Animation.typeInfos.padding=qani.Animation.typeInfos["border-width"]={numeric:qani.Animation.numeric.pxMulParse,denumeric:qani.Animation.denumeric.pxMulParse,getData:qani.Animation.defaultVal.getData,setData:qani.Animation.defaultVal.setData,tween:qani.Animation.defaultVal.tween},qani.Animation.animeList=[[]],qani.Animation.run=function(a){function c(a){var e=a&&a>1e6?a:(new Date).getTime();if(b.length===0){b.isRunning=!1;return}for(var f=0,g=b.length;f<g;f++){var h=b[f];if(h.isRunning){qext.event.engine("onrenderbegin",h);var i=h.status!==qani.animation.status.CONTINUE?h.begin:h.continueTime,j=h.duration,k=h.animer,l=k.changes,m=k.obj,n=qani.Animation.typeInfos;if(e>j+i){for(var o=0,p=l.length;o<p;o++){var q=l[o],r=q.type,s=n[r];s.setData(m,q.type,s.denumeric(q.to))}h.status=qani.animation.status.FINISH,qext.event.engine("onrenderend",h),qext.event.engine("onfinish",h),h.isRunning=!1,b.isFullFiled=!1,b.splice(f--,1),g=b.length;continue}for(var o=0,t=l.length;o<t;o++){var q=l[o],r=q.type,s=n[r],u=q.to,v=q.now,w=[];if(u.length){v=[].concat(v);for(var x=0,y=u.length;x<y;x++)changeNowN=v[x]||0,w[x]=q.tween(v[x],u[x],e,i,j)}else w=q.tween(v,q.to,e,i,j);v=w,s.setData(m,r,s.denumeric(w))}h.paintTime=e,qext.event.engine("onrenderend",h)}}b.isRunning||(b.isRunning=!0),d(c)}var b=a,d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,20)},e=window.mozAnimationStartTime||(new Date).getTime();d(c)},qani.Animation.prototype.start=function(){if(this.isRunning)return;qext.event.engine("onstart",this),this.isRunning=!0,this.status=qani.animation.status.STATED;var a=this.animer,b=qani.Animation.typeInfos,c=a.changes,d=a.obj;for(var e=0,f=c.length;e<f;e++){var g=c[e];if(!(g.type in b)||b[g.type].testBrowser&&!b[g.type].testBrowser()){c.splice(e--,1),f=c.length;continue}if(typeof g.to=="undefined")throw new Error('The animation "to" can not be undefined!');var h=g.type,i=b[h],j=i.numeric,k=i.denumeric,l=i.getData,m=i.setData;if(typeof g.from!="undefined")g.from=j(g.from);else{var n=j(l(d,h));g.from=n||0}g.now=g.from,g.to=j(g.to);if(g.tween){if(typeof g.tween=="string"){if(!qani.Animation.tween[g.tween])throw new Error(g.tween+" is undefined");g.tween=qani.Animation.tween[g.tween]}}else g.tween=qani.Animation.defaultVal.tween}this.paintTime=this.begin=(new Date).getTime();var o=!0,p=10,q=qani.Animation.animeList;for(var e=0,f=q.length;e<f;e++){var r=q[e],s=0;for(var t=0,u=r.length;t<u;t++)s+=r[t].animer.changes.length;if(!r.isFullFiled){r.push(this),r.isRunning||qani.Animation.run(r),s>p&&(r.isFullFiled=!0),o=!1;break}}if(o){var r=[this];q.push(r),qani.Animation.run(r)}},qani.Animation.prototype.stop=function(){if(!this.isRunning)return;var a=qani.Animation.animeList,b=this;for(var c=0,d=a.length;c<d;c++){var e=a[c];for(var f=0,g=e.length;f<g;f++)if(b===e[f]){b.passedTime=b.status!==qani.animation.status.CONTINUE?b.paintTime-b.begin:b.paintTime-b.continueTime,b.status=qani.animation.status.STOPED,b.isRunning=!1,qext.event.engine("onstop",b);return}}},qani.Animation.prototype.keepon=function(){if(this.isRunning||!this.status===qani.animation.status.STOPED)return;var a=this,b=qani.Animation.animeList;a.continueTime=(new Date).getTime()-a.passedTime;for(var c=0,d=b.length;c<d;c++){var e=b[c];for(var f=0,g=e.length;f<g;f++)if(a===e[f]){a.status=qani.animation.status.CONTINUE,a.isRunning=!0,qext.event.engine("oncontinue",a);return}}},qani.Animation.prototype.reset=function(){var a=qani.Animation.animeList,b=qani.Animation.typeInfos,c=this;for(var d=0,e=a.length;d<e;d++){var f=a[d];for(var g=0,h=f.length;g<h;g++){var i=f[g];if(c===i){for(var j=0,k=c.animer.changes.length;j<k;j++){var l=c.animer.changes[j],m=b[l.type];if(!m)throw new Error("Not support this type");m.setData(i.animer.obj,l.type,m.denumeric(l.from)),l.now=l.from}f.splice(g--,1),c.isRunning=!1,qext.event.engine("onreset",c);return}}}},qani.Animation.prototype.destroy=function(){var a=qani.Animation.animeList,b=this;for(var c=0,d=a.length;c<d;c++){var e=a[c];for(var f=0,g=e.length;f<g;f++){var h=e[f];b===h&&e.splice(f--,1)}}},qani.Animation.prototype.on=function(a,b){var c=this;switch(a){case"start":qext.event.addEventListener(c,"onstart",b);break;case"stop":qext.event.addEventListener(c,"onstop",b);break;case"continue":qext.event.addEventListener(c,"oncontinue",b);break;case"finish":qext.event.addEventListener(c,"onfinish",b);break;case"reset":qext.event.addEventListener(c,"onreset",b);break;case"renderbegin":qext.event.addEventListener(c,"onrenderbegin",b);break;case"renderend":qext.event.addEventListener(c,"onrenderend",b)}},qani.Animation.create=function(a,b){var a=[].concat(a),c=qani.Animation.typeInfos;for(var d=0,e=a.length;d<e;d++){if(a[d]in c)throw new Error("This anime has already definde");c[a[d]]={},c[a[d]].testBrowser=b.testBrowser||function(){return!0},c[a[d]].numeric=b.numeric||qani.Animation.defaultVal.numeric,c[a[d]].denumeric=b.denumeric||qani.Animation.defaultVal.denumeric,c[a[d]].getData=b.getData||qani.Animation.defaultVal.getData,c[a[d]].setData=b.setData||qani.Animation.defaultVal.setData,c[a[d]].tween=b.tween||qani.Animation.defaultVal.tween}},qani.animate=qani.animate=function(a,b,c,d){if(arguments.length<2)throw new Error("Animate need 2 arguments!");if(arguments.length===2||arguments.length===3&&typeof arguments[2]=="number"){var d=c||500;if(b.type&&b.to){var e=qani.animation({obj:a,changes:b},d);return e.start(),e}var f=b,g=[];for(var h in f){var i=/(.+)\$tween *: *(\S+)/.exec(f[h]),j={type:h};i?(j.to=i[1],j.tween=i[2]):j.to=f[h],g.push(j)}var e=qani.animation({obj:a,changes:g},d);return e.start(),e}var d=d||500,k=b,f=c,g=[];for(var h in f){var l;for(var m in k)h===m&&(l=k[m]);var j={type:h};typeof l!="undefined"&&(j.from=l);var i=/(.+)\$tween: *(\S+)/.exec(f[h]);i?(j.to=i[1],j.tween=i[2]):j.to=f[h],g.push(j)}var e=qani.animation({obj:a,changes:g},d);return e.start(),e},function(a){qani.Animation.create("opacity",{numeric:function(a){return parseFloat(a)},denumeric:function(a){return a},getData:function(a,b){if(typeof document.body.style.opacity!="undefined"){var c=T.dom.getStyle(a,"opacity");return c||1}var d=T.dom.getStyle(a,"filter"),e=/opacity *={1} *(\d+)/.exec(d);return e?e[1]/100:1},setData:function(a,b,c){typeof document.body.style.opacity!="undefined"&&(a.style.opacity=c),a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+parseInt(c*100)+")"}})}(window),function(a){var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]},c=[];qani.Animation.create(["background","border","border-color","border-top-color","border-right-color","border-bottom-color","border-left-color","background-color","outline-color","color"],{numeric:function(a){var d,e=[],f="".toLocaleLowerCase.call(a);if(a&&a.constructor==Array&&a.length%3==0)return a;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))e=[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])];else if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))e=[parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55];else if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))e=[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)];else if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))e=[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)];if(e.length>0){var g=d.index;return c[0]=a.substring(0,g),c[1]=a.substring(g+d[0].length),e}var h=b;for(var i in h)if(f.indexOf(i)!=-1){var g=f.indexOf(i);return c[0]=a.substring(0,g),c[1]=a.substring(g+i.length),h[i]}return[0,0,0]},denumeric:function(a){return c[0]+"rgb("+Math.max(Math.min(parseInt(a[0]),255),0)+", "+Math.max(Math.min(parseInt(a[1]),255),0)+", "+Math.max(Math.min(parseInt(a[2]),255),0)+")"+c[1]}})}(window),function(a){var b=function(){return T.browser.isGecko?function(a,b){var c=a.style.MozTransform,d=/rotate *\( *(\d+) *deg\)/.exec(c);return d?d[1]:0}:T.browser.isWebkit?function(a,b){var c=a.style.webkitTransform,d=/rotate *\( *(\d+) *deg\)/.exec(c);return d?d[1]:0}:T.browser.opera?function(a,b){var c=a.style.OTransform,d=/rotate *\( *(\d+) *deg\)/.exec(c);return d?d[1]:0}:function(a,b){var c=a.style.transform,d=/rotate *\( *(\d+) *deg\)/.exec(c);return d?d[1]:0}}(),c=function(){return T.browser.isGecko?function(a,b,c){a.style.MozTransform=
c}:T.browser.isWebkit?function(a,b,c){a.style.webkitTransform=c}:T.browser.opera?function(a,b,c){a.style.OTransform=c}:function(a,b,c){a.style.transform=c}}();qani.Animation.create("rotate",{denumeric:function(a){return"rotate("+a+"deg)"},getData:b,setData:c,testBrowser:function(){var a=document.body.style;return typeof a.MozTransform!="undefined"||typeof a.webkitTransform!="undefined"||typeof a.OTransform!="undefined"||typeof a.transform!="undefined"?!0:!1}})}(window),function(a){qani.Animation.create("scroll",{numeric:function(a){return parseInt(a)},denumeric:function(a){return a},getData:function(a,b){return a.scrollTop},setData:function(a,b,c){a.scrollTop=c}})}(window),function(){qani.animation.fadeIn=qani.animation.ext.fadeIn=function(a,b,c){var a=qing.dom.g(a),b=b||500;a.style.opacity="0",a.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:0)",a.style.display=="";var d=qani.animation({obj:a,changes:{type:"opacity",from:0,to:1,tween:c||"even"}},b);return d.start(),d}}(),function(){qani.animation.fadeOut=qani.animation.ext.fadeOut=function(a,b,c){var a=qing.dom.g(a),b=b||500,d=qani.animation({obj:a,changes:{type:"opacity",to:0,tween:c||"even"}},b);return d.start(),d}}(),function(){qani.animation.expand=qani.animation.ext.expand=function(a,b,c){var a=qing.dom.g(a);a.style.visibility="hidden";if(a.style.display="none")a.style.display="";var d=qing.dom.getCurrentStyle(a,"height")||a.offsetHeight,e=parseInt(d)||a.offsetHeight,b=b||500,f=qani.animation({obj:a,changes:{type:"height",from:0,to:e,tween:c||"even"}},b);return a.style.visibility="visible",f.start(),f.on("finish",function(){a.style.height=d}),f}}();